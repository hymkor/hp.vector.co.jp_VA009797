<HTML>
<HEAD>
  <TITLE>The Real Hayama Script 〜 真・葉山文書</TITLE>
  <LINK REL=stylesheet TYPE="text/css" HREF="../iyahaya.css">
</HEAD>
<BODY BGCOLOR="#000000" TEXT="#FFFFFF" LINK="#00FFFF" VLINK="#00CCCC">

<DIV ALIGN=RIGHT>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./s10.html">次頁へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./s08.html">前頁へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./index.html">目次へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="../index.html">扉ページへ</A>
</DIV>
<HR>

<H2 CLASS="RED">
  <A NAME="workbadc3">WorkBad C3 のひみつ</A>
  <SPAN>(2000/3/6)</SPAN>
</H2>

<P>
<DIV CLASS=LL>e</DIV>ff のインストーラを作っていて、<!--
-->VIO でもウインドウの左上の小アイコンを任意のものに<!--
-->設定できることが気がついた。<!--
-->条件としては次のような点があるようだ。
<DL>
  <DT><SPAN STYLE="color:#EEEEAA">★</SPAN
	>プログラムの内部で、PMアプリに化ける処理をしている。
  <DD>クリップボードにアクセスする為に必要だったんだけどね。<!--
	-->もしかしたら、関係ないかも。対照(称?)実験してねーから。
  <DT><SPAN STYLE="color:#EEEEAA">★</SPAN
	>EXEファイル自身の拡張属性にアイコンが張り込まれている。
  <DD>ちょっと違うかもしれないが、REXX から SysSetObjectData で<!--
	-->EXEファイルにアイコンを張りつければよいようだ。
  <DT><SPAN STYLE="color:#EEEEAA">★</SPAN
	>PM から直接実行されるのではなく、CMD.EXE を経由して起動している。
  <DD>つまり、実行ファイルは CMD.EXE とし、パラメータとして<!--
	-->「/C &quot;実行プログラム&quot;」として起動するわけだ。
</DL>
これで起動すると、確かに左上のアイコンが変わってくれるのだ。<!--
-->それだけでなく、SysBar/2 に表示される大アイコン(なんだそりゃ)も<!--
	-->変わってくれるのだ。うれＰー(さ、さぶい)！
</P>
<P>
ところがどっこいギッチョンチョン(←古いのか、マイナなのかさえ分からん)。
実行している VIO プログラムから、別のプログラムを子プロセスと<!--
-->して呼び出すと、なぁーんと、小アイコンは灰色になるし、SysBar/2 の<!--
-->アイコンは真っ黒になる。要はアイコンを見失ってしまうようなんだな。<!--
-->NYAOS も eff も言うなれば プログラムのランチャーみたいなもんだから<!--
-->これでは一瞬にして、名無しの権兵衛になってしまふ。
</P>
<P>
なんか、いい方法ないでしょうかねぇ。見失うってことは、<!--
-->また再認識させてやればいいような気がすんだけど、<!--
-->どうすりゃいいのかな…。<!--
-->あ、また「俺はＰＭ プログラムだっ」と<!--
-->偽の青年の主張を繰り広げればいいのかな…。<!--
-->そのうち、やってみよう。
</P>

<P ALIGN=CENTER>
	<SMALL>(((((</SMALL
	><FONT COLOR="#888888">●〜</FONT><FONT COLOR="#FF0000">*</FONT>
</P>
<P>
<DIV CLASS=LL>電</DIV>車の中で、ワークパッドを使ってたら、変なおっちゃんに<!--
-->「これなんぼくらいすんの」とカラまれてしまった。<!--
-->4万というのもアレなんで、ついつい3万と言ってしまったんだけど、<!--
-->その後、えんえんと、嫁さんもらったらお金がかかるだの、<!--
-->紙の手帳で用が足りるだの、いろいろと説教されてしまった。<TT>(^^;</TT>
</P>
<P>
まぁ、それほどうるさなく、結構おもしろいおっちゃんだったから、<!--
-->よかったんだけど、なかなか、あぁいう年代の人に、この手のものの<!--
-->有効さの説明は難しいですねぇ〜。まぁ、先方に理解しようという気が<!--
-->そもそも無さそうだったから、今回は下手な反論はせず、<!--
-->「はいはい、そうですねぇ〜、<!--
-->うんうん」と相づちしか打たなかったんですけどね。
</P>
<P>
みなさんなら、どう言います？
</P>
<P ALIGN=CENTER CLASS=SAY1>
	紙の手帳の方が安くていいぢゃん。
</P>
<P>
がびーん。<TT>(;_;)</TT>
</P>
<P>
ちなみに、ワークパッドで何をしていたかというと、<!--
-->ちゃんと仕事関係のことをまとめていたんですよ！<!--
-->(To Do と残り日数を…あぁ、結構、やば…。<!--
-->某ＹＲＬさん、早く助けて…ディスク直して…)
</P>

<HR>

<H2 CLASS=RED>
<A NAME="bossborot">ボスボロット三原則</A>
  <SPAN>(2000/03/05)</SPAN>
</H2>

<DIV CLASS=LL>あ</DIV>
ぁ、先週はとうとうメインコンテンツ全体を更新できなかったなぁ。<!--
-->週刊 eff もこれまでだね、と思った、その週間！(瞬間ぢゃないんかい)、<!--
-->思わぬ衝撃が葉山を襲った！
</P>
<P ALIGN=CENTER>
<DIV CLASS=SAY2>eff って暗い〜</DIV>
<DIV CLASS=SAY1>がびーん</DIV>
</P>

<P>
く、暗いのか…、め、めまいが〜くらくら(バキッ)。<!--
-->うぅむ、Termcap/Curses系プログラムのこと思えば、<!--
-->こんなもんだろうと思っていたのだが、考えが甘かったようだ。<!--
-->これは、さっそくカスタマイズできるようにせねば。
</P>

<P ALIGN=CENTER CLASS=SAY2M>
ということで、カスタマイズできるようにしました(あっさり)
</P>

<P>
ただ、変更できるようにしたと言えども、その辺、<!--
-->色の体系ちゅーんが、変更を前提にしたもんでないので、<!--
-->背景色を全部で統一してないと、<!--
-->ちょっとみっともないことになるかもしれない。<!--
-->また、サンプルに作った _eff (eff の設定ファイル)…、<!--
-->かなり適当なので、各自の好きな色に直すように！<!--
-->元のシックな色調（と思っているのは私だけ？）に戻したい場合は、<!--
-->_eff から color 命令を削除すればよい。あと、残念ながら、<!--
-->_eff の変更を反映するには eff を再起動しなくちゃいけないです。
</P>

<P>
で、ですな。話はここで終ってなくてですね。<!--
-->これをきっかけに eff に第二の目標が出来たわけですわ。<!--
-->そう、FD系ユーザーを取り込んで、OS/2 の VIO ファイラーの標準的地位を<!--
-->目指すことである。つまり、次はキーバインドカスタマイズだね。<!--
-->今までは、これは実現せねばならぬという機能ばかりが構想にあったもので、<!--
-->他のファイラーを真似る機能は二の次だったのだ。
</P>

<P>
しかし、時は熟した。立てよ国民(ちがうって)。<!--
-->当初、構想していた機能は基本的に全て実現した！<!--
-->あとは、とっつき易くして、普及させるだけである。<!--
-->ということで、eff はゆくゆくどんとゆく(どこへ？→ 明後日の世界)
</P>

<P ALIGN=CENTER>
	<SMALL>(((((</SMALL
	><FONT COLOR="#888888">●〜</FONT><FONT COLOR="#FF0000">*</FONT>
</P>

<P>
<DIV CLASS=LL>最</DIV>近、会社では Linux + Oracle で開発している。
Linux はまぁ、予想通り使い易いシステムではあるんだけど、<!--
-->いろいろ、はまってさぁ大変だった。
<UL>
  <LI>五橋研究所製 RedHat 5.2 → RedHat 日本法人製 6.1 へのバージョンアップ
  <LI>RedHat 6.1 上への Oracle 8i のインストール
</UL>
いずれも、発売元は正式対応ぢゃないのよねー。<!--
-->ということで、見事にはまった。どんとはまった。<!--
-->おかげで、3月から参加するはずの別のプロジェクトに参加する<!--
-->暇がなくなって、そっちのチームに多大な迷惑をかけてしまっとるのですよ。
</P>
<P>
まず、Oracle。インストーラーまで Java で書くなよ…ったく。<!--
-->RH 6.0 で導入できるものが、RH 6.1 で導入できなくなってしまったら<!--
-->本末転倒だよな。幸い、英語サイト(のかなり奥底)に対策が<!--
-->記述されていたから助かったけど…。<!--
-->日本語ページには、そういうことが全然載ってないもんなー。<!--
-->日本オラクル談「正式対応は RH 6.0 です」。<!--
-->あの、もう、売ってないんですけど…(TurboLinux はハードの都合、<!--
-->使えない。また、ハードの購入元から、OS を伴に購入しなければ<!--
-->そこにサポートしてもらえないので、個人的に RH 6.0 をどっかから<!--
-->持ってくるというわけにはいかないのだ、トホホ)
</P>

<P>
次に、そのRedHat。6.1 の<!--
-->「アップグレードインストール」の、アップグレード元が<!--
-->RH 6.0 だけとは、なんたることですか。RH 5.2 が五橋研究所製といっても<!--
-->、正規代理店だったわけだし…<!--
-->(5.2→6.0 はアップグレード対応してたのかな)。<!--
-->しかも、アップグレードが失敗したせいで、<!--
-->Raid ディスクの一つが見えんようになってしまったではないですか！？<!--
-->(これ実話：まだ直らん)。
</P>
<P>
自分の事前調査が足りなかったとはいえ…、まったく…。<!--
-->でも、やっぱり、自分が悪いのかしらん…。<!--
-->どうせ、みんな私が悪いのさ、ふん！
</P>

<P>
ところで、Linux で vi(vim) を SJIS で使う方法はないか、<!--
-->どなたかご存じないですか？<!--
-->いや、データベースの漢字コードを SJIS にしなきゃいかん都合上、<!--
-->漢字コードを ja_JP.sjis にしてるんですわ。<!--
-->でも、これだと TeraTerm から IME を使って漢字を入力できんのです<!--
-->(あたりまえ)。困ったもんです。EUC にしたいのはヤマヤマなんですけどね。
</P>

<P>
まったく、気ばかり焦る、今日このごろ。愚痴ばっかりですみませんねぇ。
</P>
<P ALIGN=CENTER>
	<SMALL>(((((</SMALL
	><FONT COLOR="#888888">●〜</FONT><FONT COLOR="#FF0000">*</FONT>
</P>
<P>
<DIV CLASS=LL>L</DIV>inux の tar は z オプションの代わりに y オプション<!--
-->を使うと、gzip の代わりに bzip2 を使ってくれるそうな。
</P>
<P>
たまたま、<A HREF="http://www.linux.or.jp/JF/">JF</A>のページ<!--
-->のページを読んでいたら、bzip2 の節で、tar に y オプションを追加する<!--
-->パッチが載っていた。で、そのパッチを見ると、量的に少なかったもんだから
</P>
<P CLASS=SAY2M>
	こりゃ、ベースの tar が違っても、(手でパッチ)あてられるんでないかい
</P>
<P>
と思ったもんだ。で、ですねぇ、実際にやろうとしてしまったんだわさぁ〜。<!--
-->用意したものは、AK版 GNU tar 2.58 、そして homy さんの SJIS 用パッチ、<!--
-->んでもって、<A HREF="http://www.linux.or.jp/JF/">JF</A>からパクってきた<!--
-->bzip2 パッチだ。途中、バージョンを間違えたりして、いろいろ手間取った<!--
-->ものの、なんとか、homy さん版バイナリと同じものを作ることができた<!--
-->(と思う、多分)。で、次にパッチをあてようとしたわけだ。
</P>
<P>
ところが、ベースのソースが 0.0.2 の差とはいえども、結構 変わっていたので、<!--
-->やはり、GNU patch は使えそうもない。ということで、文字列<!--
--><TT>&quot;gzip&quot;</TT>を検索したり、ごちゃごちゃさわり、<!--
-->結局、vi 片手に改造っぽくやってしまった。
</P>
<P>
で、どうなったかというと、「tar -y」が「tar --zip=bzip2」と等価には<!--
-->なったので、一応、でけた！というべきなんだろう。<!--
-->だが、しかし、これで tar.bz2 書庫を作ると、よう分からんが、<!--
-->書庫に後ろに余計なゴミがついてる…(内容は \0 のかたまり)。
<OL>
  <LI><TT>tar cvf - bzip2tar.patch | bzip2 &gt; make_by_pipe.tgz</TT>
  <LI><TT>tar --zip=bzip2 -zcvf make_by_zipopt.tgz bzip2tar.patch</TT>
  <LI><TT>ytar ycvf make_by_yopt.tgz bzip2tar.patch</TT>
  <LI><TT>tar zcvf make_by_zopt.tgz bzip2tar.patch</TT>(参考)
</OL>
結果を見ると
<PRE STYLE="margin-left:50pt">
 1,215 Mar  5 21:59 make_by_pipe.tgz
10,240 Mar  5 22:00 make_by_yopt.tgz
10,240 Mar  5 21:59 make_by_zipopt.tgz
10,240 Mar  5 22:02 make_by_zopt.tgz
</PRE>
元々のバグなのか！？<!--
-->ちなみに ytar というのが、葉山のコンパイルしたバージョンです。<!--
-->圧縮・解凍自体は正常に行われるんですけどね。<!--
-->解凍される度に Warning されるし…、<!--
-->これはいったいどういうことなんだろう。
<P>
個人的に思うに、OS/2 の tar って、--remove-files <!--
-->オプションが使えないし、<!--
-->タイムタンプ見ると、英語版も 2,3年更新されていないだし、<!--
-->この際、最新の UNIX 版から移植し直した方がいいような気がする…。<!--
-->UNIXからの移植得意な人、誰かやってよ〜(また人に頼る〜)
</P>
<P>
ところで、上で作った -y 付き tar。結局、問題ありと見て、公開しませんけど、<!--
-->誰か要ります？ 要らんわな、サイズ膨れるんだから…。
</P>

<P ALIGN=CENTER>
	<SMALL>(((((</SMALL
	><FONT COLOR="#888888">●〜</FONT><FONT COLOR="#FF0000">*</FONT>
</P>

<P>
<DIV CLASS=LL>フ</DIV>ァウンデーションの危機。<!--
-->一ヶ月前の本ページで買ったと喜んでいたが…、<!--
-->実は未だ読み終っていない。思ったほど、吸い込まれないのだなぁ。<!--
-->で、しかも、矛盾点が幾つか出てきてるのだな。やっぱり、<!--
-->アシモフが書いとらんからだろうか。
<UL>
  <LI>Ｒ・ダニール・オリヴォーが「第零原則に基いて行動すればよい」<!--
	-->などと発言している。
</UL>
第零原則を発動するための基準が確立していないからこそ、<!--
-->ダニールはセルダンの心理歴史学からそのヒントを見い出そうと<!--
-->してるんでしょうが！ なんだかなー、ダニールの言動、<!--
-->ロボット三原則に縛られたロボットらしくなさすぎるんだなぁ〜。
</P>
<P>
なんか、別の意味で「ファウンデーションの危機」のような。<!--
-->あ、でも最後まで読まんうちに判断してはいかんな。<!--
-->さっさと読んでしまおう
</P>
<P CLASS="SAY2M">
	読み終ったら、前言撤回宣言してたりいて
</P>
<P>
あ、それ、ありがちだわさ〜。
</P>
<HR>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./s10.html">次頁へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./s08.html">前頁へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="./index.html">目次へ</A>
<FONT COLOR="#EEEEAA" SIZE=-1>▼</FONT><A HREF="../index.html">扉ページへ</A>
</BODY>
</HTML>
