<HTML>
<HEAD>
   <TITLE>Nyaosick FAQ page</TITLE>
</HEAD>
<BODY>
<H1>Nyaosick FAQ page</H1>

迷える Nyaosicker達よ、よくぞ来た。もっと迷うがよい。
<SMALL>(こらこら)</SMALL>
<P>
目次
<OL>
  <LI><A HREF="#install">インストール篇</A> … 起動もできへんやんけ
  <LI><A HREF="#bug">バグちゃうんか篇</A> … いったいどないなってんや
  <LI><A HREF="#mymother">わがまま篇</A> … こんなこともできんのか
  <LI><A HREF="#etc">その他</A> … お前では話にならん！上司呼んでこい！
</OL>

<HR>
<H2><A NAME="install">インストール篇</A></H2>

<DL>
<DT><B>NYAOS を起動すると回復不可能なエラーが起きました」となります。</DT></B>
	<SPAN STYLE="color:red">(2000/07/22 1.62+用に改訂)</SPAN>

<DD>	emx関係の DLL が 0.9d FIX<STRIKE>02</STRIKE>03 以降で<!--
	-->あることを確認してください。<!--
	-->これ以前のバージョンでは動作しません。<!--
	-->また、DLL は emxrt.zip に含まれているもの全てが必要です。<!--
	-->LIBPATH のディレクトリにあるか、チェックしてください。<!--
	-->emxrev コマンドを実行して
	<UL>
		<LI>EMX : revision = <B>61</B>
		<LI>EMXLIBCS : revision = <B>63</B>
		<LI>EMXWRAP : revision = 60
	</UL>
	が出ればＯｋです。<!--
	-->1.60 以降のバージョンのインストーラーでは、<!--
	-->このリビジョンをチェックしますので、<!--
	-->デスクトップにアイコンを登録しない場合でも、<!--
	-->怪しいと思ったら、実行してみてください。<!--
	-->(なお、1.60 のインストーラーはバグがあって、<!--
	-->リビジョンがあっていても、同じ DLL が複数あると、<!--
	-->Warning を出してしまいます)

<DT><B>NYAOS を起動すると「canna.dll loaded.」の後に<!--
	-->「Abnormal program termination」と表示して、<!--
	-->コアダンプして起動しません。</B>

<DD>	1.60 以前で、canna.dll が LIBPATH にあって、<!--
	-->ネットワークが使えないとこのような事になります。<!--
	-->1.61 ではこのようなことが起きないよう、修正されています。<!--
	-->1.60以前では「OS/2システム」→「システム設定」→「TCP/IP構成」の<!--
	-->「ホスト名」の2ページ目で、「127.0.0.1  loopback」を<!--
	-->追加してみてください。<!--
	-->すると少なくとも「かな漢字変換サーバと通信できません」<!--
	-->というエラーは出るものの、一応、起動するようになります<!--
	-->原因は、かんなのクライアント用ライブラリーのバグです<!--
	-->(というか、UNIXの場合、loopback さえ使えない環境など、<!--
	-->まずないので、バグというと酷なのですが)。
</DL>

<HR>
<H2><A NAME="bug">バグちゃうんか篇</A></H2>
<DL>
<DT><B>‘かんな’が使えません。</B>
<DD>	<STRIKE>そりゃ、いかんなぁ</STRIKE>
	<UL>
	  <LI>かんな対応 vi や Mule などでも、かんなが使用できますか？
		<BR>→ かんな自体をまず導入してください。
	  <LI>canna.dll が  LIBPATH 上にありますか？
		<BR>→ DLLも梱包したかんなクライアントキットを<!--
			-->入手してください。
	  <LI>かんなの稼働ドライブと NYAOS の起動ドライブが異なっていませんか？
		<BR>→ 同一ドライブで起動するか、
			環境変数 CANNYA へかんなのドライブを定義してください。
	　<LI>ネットワーク使えます？
		<BR>→ 別にネットワークカードがなくとも、
			ループバックで TCP/IP が使えるようにしてください。
	</UL>
	かんな関係のソフトウェアは、
	<A HREF="http://www.t3.rim.or.jp/~zodiac/"
	>上野 博さん</A>が OS/2 にポーティングされています。

<DT><B>「+」を名前に含むファイルの補完が出来ません。</B>
<DD>	1.58以前の NYAOS ではデフォルトで「+」が補完対象外文字と<!--
	-->なっています。最新版に置き換えて、環境(シェル)変数 NOTPATHCHAR<!--
	-->に「+」が含まれないようにしてください。

<DT><B>逆クォートなどで、コマンドラインに長い文字を展開すると、<!--
	-->「このセッション内のプログラムに問題が起き, 続行できません」<!--
	-->というエラーになります。</B>
<DD>	<B>NYAOS のせいではありません。</B><!--
	-->CMD.EXE が受けつける、コマンドラインの長さを超えている為です。<!--
	-->NYAOS 自身の内蔵コマンドではこのようなことにはなりません。

<DT><B>パイプを多く連結すると
	「コマンド処理に必要なメモリーが足りません」等のエラーが出ます。</B>
<DD>	パイプ処理は基本的に CMD.EXE に任せているので、<!--
	--><B>NYAOS の責任ではありません</B>。<!--
	-->CMD.EXE で実行しても同様の結果になるはずです。

<DT><B>何百文字も入力して、Enter を押すと、NYAOS が落ちます</B>
<DD>	1.60 までのバグです。1.61 では修正されています。

<DT><B>内蔵ls で「ls | more」とした場合、<!--
	-->Ctrl-C で中断することができません。</B>
<DD>	<B>バグ</B>ですが、現在の NYAOS ではどうしようもありません。<!--
	-->NYAOS が Ctrl-C を禁止させているためです。<!--
	-->回避策として「ls -P」「ls | <A HREF="./ell.html#karl"
	>karl</A>」を代わりに使うか、<!--
	-->Ctrl-Pause(Break)で終了させるという手があります。<!--
	-->ただし、Ctrl-Pause は入力するタイミングを誤ると、<!--
	-->NYAOS 自体を終了させてしまいますので、注意が必要です。

<DT><B>コマンドライン編集中、行末で倍角文字を表示すると、<!--
	-->以後の文字の表示位置がおかしくなります。</B>
<DD>	設計上の<B>バグ</B>ですが、今のところ、どうしようもありません。

<DT><B>画面をクリアするコマンドを実行すると、<!--
	-->画面最上段でプロンプトとロゴが衝突します</B>
<DD>	NYAOS 1.61 で修正されています。

<DT><B>wget で取り込んだ、チルダ(~)で始まるディレクトリへ移動できません</B>
<DD>	~foo というディレクトリ名の場合、「<TT>cd ./~foo</TT>」などと<!--
	-->カレントディレクトリ名「<TT><B>./</B></TT>」を<!--
	-->足してみてください。NYAOS のチルダ変換は、<!--
	-->空白の直後のチルダにしか働きません。

<DT><B>環境変数を設定するコマンドファイルがうまく実行されません</B>
<DD>	そういう<B>仕様</B>です。<!--
	-->コマンドファイルは、子プロセスの CMD.EXE 内で実行されるので、<!--
	-->ここで環境変数を設定しても、NYAOS 内に反映されません。<!--
	-->source コマンドを使うか、nyaos.rc なりに記述してください。

<DT><B>source コマンドでコマンドファイルを読み込みましたが、
	if分・goto 文や for文でエラーになります。</B>
<DD>	そういう<B>仕様</B>です。<!--
	-->source コマンドでは、goto はサポートしていませんし、<!--
	-->for文も若干文法が変わっています。<!--
	-->環境変数を定義するコマンドファイルで、分岐などを行いたい時は、<!--
	-->コマンドファイルを REXX で記述してください。<!--
	-->REXX については、フルサポートしているはずです。<!--
	-->(って、REXX.DLL に放り込んでいるだけですが)

<DT><B>カレントディレクトリが pushd できません</B>
<DD>	「<TT>pushd .</TT>」してください。<!--
	-->ただの「<TT>pushd</TT>」でカレントディレクトリをpushdしたい<!--
	-->場合は「<TT>alias pushd=&quot;pushd %* .&quot;</TT>」しませふ。

<DT><A NAME="new00312" STYLE="font-weight:bold"
	>一度呼び出した履歴を、編集しようとしてから、<!--
	-->別の履歴の方がいいと判断して、上下矢印キーを押しても、<!--
	-->履歴を呼び出せません</A>
	<SPAN STYLE="color:red">(2000/3/12 追加)</SPAN>
<DD>	二回目の履歴参照の際には、おそらく単語単位での履歴参照モードに<!--
	-->に入ってしまっていると思われます。<!--
	-->単語単位の履歴参照は、Vz互換履歴参照機能(vz_prev_history, <!--
	-->vz_next_history)だけにある機能ですので、tcsh互換のものに<!--
	-->差し換えることで、解決できると思います。具体的には<!--
	-->「bindkey UP prev_history」「bindkey DOWN next_history」を<!--
	-->実行すればｏｋです。

<DT><B>とにかくバグが出たぞ〜</B>
<DD>	<A HREF="mailto:iyamatta.hayama@nifty.ne.jp"
	>作者</A>に遠慮なく連絡してください。<!--
	-->ただし、状況の把握を迅速にするため
	<UL>
		<LI>nyaos.rc(あるいは .nyaos)、
		<LI>CMD.EXE 単体でも起きることか否か
		<LI>emxrev.cmd の結果、つまり、emx のバージョン。
		<LI>NYAOS のバージョン
		<LI>場合によっては、環境変数/シェル変数一覧(set,letの結果)
	</UL>
	等も書き添えてください。<!--
	-->また、本当にバグかという確信がなくても遠慮はいりません。<!--
	-->仮にそれがバグではなくて、仕様であったにせよ、<!--
	-->マニュアルや本FAQに反映することが出来ますし、<!--
	-->何より、作者の自尊心をくすぐることが出来、<!--
	-->今後の製作意欲にガソリンを投じることが出来ます<!--
	-->(バグが出て、自尊心も糞もなかろう(笑))。
</DL>

<HR>
<H2><A NAME="mymother">わがまま篇</A></H2>

<DL>
<DT><B>キーバインドをワードスターライク(Vzっぽく)できませんか？</B>
<DD>	「nyaos -z」で起動するか、実行中に「bind vz」と<!--
	-->タイプしてください。
	<a href="http://www.netpassport.or.jp/~wchiaki/"
	>ちあきさん</A>作のVzライクなエディター KashEDIT
	をお持ちならば、「hotkey ESCAPE &quot;ke.exe&quot;」と設定すると、<!--
	-->幸せになれるかもしれません。

<DT><B>MOVE や COPY、DIR で、ディレクトリ区切り文字に「/」を使いたいんですが</B>
<DD>alias の「<TT>%@</TT>」マクロを使って<!--
	-->「<TT>alias move=&quot;move %@&quot;</TT>」<!--
	-->「<TT>alias copy=&quot;copy %@&quot;</TT>」<!--
	-->などと定義してください。<!--
	--><TT>%@</TT> マクロは、引数の「/」を「￥」へ、<!--
	-->引数先頭の「-」(マイナス)を「/」へ変換します。

<DT><B>ヒストリ内容を、別の NYAOS へコピーしたいんですが</B>
<DD>
	複写元のNYAOSで「<TT>history &gt; temp</TT>」で、<!--
	-->ファイルへヒストリを出力してから、<!--
	-->複写先のNYAOSで「<TT>source -h temp</TT>」で取り込んでください。<!--
	-->これが面倒ならば<!--
	-->「hotkey F11 &quot;history &gt; ~/.history&quot;」<!--
	-->「hotkey F12 &quot;source -h ~/.history&quot;」などと<!--
	-->nyaos.rc で定義しておけば、２キーで移し換えが出来ます。<!--
	-->(^C が画面に表示されるのはバグです。1.60では修正されています)

<DT><B>ヒストリ内容を、NYAOS 終了時に自動保存させたいんですが…</B>
<DD>	「<T>let atexit=&quot;history &gt; ~/.history&quot;</TT>」と<!--
	-->定義すれば、終了時に ~/.history というファイルにヒストリが<!--
	-->自動保存されます。

<DT><B>NYAOS は、bash や csh のようにワイルドカード展開を<!--
	-->してくれないのですか？</B>
<DD>	常に展開を行わせることはできません。<!--
	-->なぜなら rename コマンドによる拡張子一括変換<!--
	-->が使えなくなるなど、弊害があるからです。<!--
	-->コマンド単位でワイルドカードの展開の指定ならば、<!--
	-->「<TT>alias foo=&quot;foo %+*&quot;</TT>」などと<!--
	-->定義すれば可能です。<!--
	-->alias での <TT>%+*</TT> はワイルドカード展開をさせる<!--
	-->マクロです。<!--
	-->スラッシュなどの変換も同時に行う「<TT>%+@</TT>」等もあります。<!--
	-->詳しくは、NYAOS.DOCを参照ください。

<DT><B>プロンプトに NYAOS の拡張マクロを使用すると、<!--
	-->何かのタイミングで CMD.EXE を使う時に<!--
	-->みっともなくなります。</B>
<DD>	環境変数は PROMPT ではなく、NYAOSPROMPT を使ってください。<!--
	-->あるいは「<TT>let PROMPT=...</TT>」とする手もあります。

<DT><B>COPY命令でのファイルの連結(COPY ファイル名1+ファイル名2+…)や、<!--
	-->SET PATH=などでのディレクトリの列挙で、<!--
	-->パス名の補完をしたいのですが</B>
<DD>	「<TT>let NOTPATHCHAR=&quot;+;&quot;</TT>」を実行してください。
	そうすれば、「<TT>+</TT>」や「<TT>;</TT>」が<!--
	-->補完対象文字から除かれます。<!--
	-->つまり、補完の際に空白と同じような扱いをされるということです。<!--
	-->ただし、これは NYAOS 1.59 以降の機能です。

<DT><B><A NAME="new000708"
>外部コマンドによって、カレントディレクトリを変更したいのですが…</A></B>
<SPAN STYLE="color:red">(2000/07/08 改訂)</SPAN>
<DD>
	<STRIKE>原則的には出来ません。</STRIKE>
	1.62+(2000/07/22版スナップショット)より出来るようになりました。<!--
	-->名前付きパイプに「cd ディレク<!--
	-->トリ名」などという文字列を渡すと、NYAOS のカレントディレク<!--
	-->トリを変更することができます。パイプのパス名は環境変数<!--
	-->PIPE2NYAOS にが格納されています。<!--
	-->詳しくは、マニュアルの「８．子プロセスからの環境操作」の節を<!--
	-->お読みください。

<DT><B>source を使わず、外部コマンドによって、<!--
	-->環境変数を変更したいのですが…</B>
	<SPAN STYLE="color:red">(2000/07/08 改訂)</SPAN>
<DD>	<A HREF="#new000708">カレントディレクトリの変更</A>と同様の<!--
	-->方法で可能です。パイプに「set 環境変数名=値」という文字列<!--
	-->を %PIPE2NYAOS% の示す名前付きパイプへ書き込んでください。
	<PRE>
		echo set 環境変数名=値 > %PIPE2NYAOS%
	</PRE>

<DT><A NAME="new991216" STYLE="font-weight:bold"
	>ファイラーやエディターより NYAOS を呼び出すと、<!--
	-->画面をクリアしてしまうので、<!--
	-->それまで表示していた情報が消えてしまいます。</A>
	<SPAN STYLE="color:red">(1999/12/16 追加)</SPAN>

<DD>	「<TT>nyaos -q</TT>」すれば、画面クリアもしませんし、<!--
	-->NYAOS のロゴも表示されません。<!--
	-->nyaos.rc 内の命令が何か表示したりしますが、<!--
	-->それくらいは「&gt; nul」をくっつけるなりして<!--
	-->自分で処置しましょう。
	「canna.dll loaded.」の表示も、1.61 以降では nyaos -q
	で表示を抑制されます。
<DT><A NAME="new000205" STYLE="font-weight:bold"
	>COMSPEC に NYAOS を指定したいんですが、可能ですか？</A>
	<SPAN STYLE="color:red">(2000/2/5 追加)</SPAN>
<DD>	可能です。ただし、推奨はしません。
	環境変数 EMXSHELL に CMD.EXE のパスを指定しておいてください。

<DT><A NAME="new000525" STYLE="font-weight:bold"
	>他のプログラムを起動した時にタイトルバーを変化させて欲しいのですが</A>
	<SPAN STYLE="color:red">(2000/5/25 追加)</SPAN>
<DD>	今のところ、ちゃんとしたやり方が分かりません。<!--
	-->API は分かっているのですが、特殊なケースでしか、<!--
	-->実際にタイトル文字列を変えられないようです。<!--
	-->その特殊なケースとは、NYAOSの起動アイコンにアイコン<!--
	-->タイトルが無い場合などがあります。<!--
	-->タイトル文字を動的に変える、<!--
	-->いい方法があれば、どなたか教えてください。
</DL>

<HR>
<H2><A NAME="etc">その他</A></H2>
<DL>
<DT><B>ソースをダウンロードしても、展開できません</B>
	<SPAN STYLE="color:red">(2000/3/12 変更)</SPAN>
<DD>	以前はベクター社のサーバーが .bz2 拡張子のファイルをアスキー転送<!--
	-->していましたので、Netscape 4.xx では正常にダウンロードでき<!--
	-->ませんでしたが、現在は大丈夫なはずです。駄目な場合、作者<!--
	-->まで御連絡ください。


<DT><B>作者にメールを送っても、エラーメールが帰ってきてしまいます。</B>
<DD>	以前、サポートアドレスとして公表していた
	iya-hayamatta@ijk.com に送っていただいた場合、
	そちらの SMTPサーバの設定によっては、作者の元にメールが届かず、
	エラーメールとして跳ね返されてしまう場合があります
	(ijk.comによると SPAMメール防止策だそうですが…)。
	<A HREF="mailto:iyamatta.hayama@nifty.ne.jp"
	>iyamatta.hayama@nifty.ne.jp</A>をご利用ください。

<DT><B>作者にメールを出したんですが、音沙汰ありません</B>
<DD>	もう2,3日待ってこなかったら、すみませんが、もう一度メールしてください。
	眠いもんだから、結構、メールの返事が遅くなることが多いんです。
	ごめんなさい。

<DT><B>作者にメールを出して、要望を伝え、返事ももらったのに、
	未だ依頼した機能が実現されていません</B>
<DD>	返信メールで「それはちょっと難しいです」とか言っていなければ、
	まず「忘れています」。催促しませふ。

<DT><B>改良パッチを作ったんですが…</B>
<DD>	とっととよこせ！なーんてね。
	でも、今までパッチを送ってくれた方って、
	かの Altair★先生 だけなの…。

<DT><B>NYAOS、はっきり言って、重たいです。</B>
<DD>	<STRIKE>うるせぇ</STRIKE>。
	原因としては、
	<UL>
	  <LI>いちいち、CMD.EXE を呼び出している。
	  <LI>キーのオートリピートが遅い。
	  <LI>NYAOS 自体が結構巨大である。
	</UL>
	などがあります。
	一部 DLL化、コマンドの削減、CMD.EXE などの独立など考えていますが、
	実現の目途は立っていません。
</DL>
</BODY>
</HTML>
